<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" href="css/style.css" th:href="@{css/style.css}">
  <link rel="icon" type="image/png" href=icons/favicon.ico/>
  <title>ClimbRat</title>
</head>

<body>
  <header>
    <h1 style="margin-bottom: 0;">ClimbRat</h1>
    <h3 style="margin-top: 0;"><span th:text="${currentUser.userName}"></span>
      <span class="alias" th:text="${'@' + currentUser.profileString}"></span></h3>
  </header>
  <main>
    <aside class="mainColumn" id="asideLeft">
      <img class="profilePicture" alt="profile picture" src="img/defaultProfile.jpg"
           th:src="@{{url}(url=${currentUser.profilePicture==null?'img/defaultProfile.jpg':'home/picture/' + currentUser.profilePicture.id})}">
      <nav>
        <a class="sideMenuItem" href="/home"><img class="icon" src="/icons/home.svg" alt="home"><span>Home</span></a>
        <a class="sideMenuItem" href="/home"><img class="icon" src="/icons/profile.svg"
                                                  alt="profile"><span>Profile</span></a>
        <a class="sideMenuItem" href="/home"><img class="icon" src="/icons/picture.svg"
                                                  alt="picture"><span>Picture</span></a>
        <a class="sideMenuItem" href="/home"><img class="icon" src="/icons/likes.svg" alt="likes"><span>Likes</span></a>
      </nav>
    </aside>

    <section class="mainColumn" id="wall">

      <article class="post">
        <header>
          <span th:text="${currentUser.userName}"></span><span class="alias"
                                                               th:text="${'@' + currentUser.profileString}"></span>
        </header>
        <form id="newPostForm" th:action="@{/home}" method="post" enctype="multipart/form-data">
          <textarea name="message" id="newPostMessage" rows="5" placeholder="¿Qué te cuentas?"></textarea>
        </form>
        <footer>
          <input type="submit" value="Post" form="newPostForm">
          <input accept="image/png, image/jpeg" form="newPostForm" id="postImageUpload" name="postImage" type="file">
        </footer>
      </article>

      <article class="post" th:each="wallPost: ${wallPosts}">
        <header>
          <span th:text="${wallPost.author.userName}">Name</span>
          <span class="alias" th:text="'@' + ${wallPost.author.profileString}">@alias</span>
          <time th:text="${#temporals.format(wallPost.postDateTime, 'dd/MM/yyyy HH:mm')}">11/12/2019</time>
        </header>
        <div th:if="${wallPost.picture != null}">
          <img class="postPicture" alt="Post picture" src=""
               th:src="@{/home/picture/{id}(id=${wallPost.picture.id})}">
        </div>
        <section th:text="${wallPost.message}" class="postMessage"></section>
        <footer>
          <form class="likeForm" th:action="@{/home/like}" method="post">
            <input type="hidden" id="likeInput" name="likedWallPost" th:value="${wallPost.id}">
            <input class="smallIcon" type="image" src="icons/likes.svg" alt="submit">
            <span class="counter" th:text="${#lists.size(wallPost.likes)}"></span>
          </form>
          <div class="commentCount">
            <a href="/home"><img class="smallIcon" src="/icons/dialogue.svg" alt="comments"></a>
            <span class="counter" th:text="${#lists.size(wallPost.comments)}"></span>
          </div>
        </footer>
      </article>

    </section>
    <aside class="mainColumn" id="asideRight">
      <input type="text" name="cuenta" id="buscarCuenta" placeholder="Buscar cuenta">
      <section>
        <h3>Followers:</h3>
        <ul>
          <li th:each="follower: ${followers}">
            <span th:text="${follower.userName}"></span>
            <span class="alias" th:text="${'@' + follower.profileString}"></span></li>
        </ul>
      </section>
      <section>
        <h3>Following:</h3>
        <ul>
          <li th:each="following: ${followed}">
            <span th:text="${following.userName}"></span>
            <span class="alias" th:text="${'@' + following.profileString}"></span></li>
        </ul>
      </section>
    </aside>
  </main>
  <footer></footer>
</body>

</html>